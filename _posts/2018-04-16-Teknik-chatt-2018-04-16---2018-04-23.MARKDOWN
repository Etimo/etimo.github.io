---
layout: post
title: Teknik-chatt 2018-04-16 - 2018-04-23
excerpt_separator: <!--excerpt-->
---
<section class="message" markdown="1">
### joakoles - 2018-04-16 17:12 53s

Jag l√•nar en ergonomi-setup: Mousetrapper-"mus" och tilbeh√∂r att vila armarna p√•. N√•n som har koll p√• s√•nt och vet vad man ska ha om man vill att axlar osv. ska h√•lla l√§nge?
Slack for iOS Upload

<div class="imageblock">
<a href="/assets/blogAssets/FA7GWLKCJ-Image_uploaded_from_iOS.jpg">
<img alt="Image uploaded from iOS.jpg" src="/assets/blogAssets/thumbnail-FA7GWLKCJ-Image_uploaded_from_iOS.jpg"/>
</a></div>

     
Jag tycker denna setup fungerar ganska bra efter f√∂rsta dagens test. Aningen sv√•rt att dubbelklicka (man missar pga. k√§nsligheten men det kanske man v√§njer sig till eller justeras) och skrollen funkar bara s√•d√§r (men det kanske √§r b√§ttre i deras nyare modeller).
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-16 23:16 52s

N√•n som har erfarenhet av kafka?
Kafka som i [https://kafka.apache.org/](https://kafka.apache.org/), inte f√∂rfattaren franz kafka

<div class="attachment"><h4>Apache Kafka</h4><div class="text">Apache Kafka: A Distributed Streaming Platform.</div>
<a href="https://kafka.apache.org/"><img src="http://apache-kafka.org/images/apache-kafka.png" fallback="Apache Kafka"/></a></div>
    
üòÑ
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-16 23:53 28s

N√•gra av hans b√∂cker √§r lite f√∂rvirrande och alla publicerade etter hans d√∂d.
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-17 24:10 52s

√Ñr i Processen med kafka. G√∂r vad den ska, verkar klara de volymer av meddelanden vi matat den med bra. N√•got f√∂rvirrande rollf√∂rdelning mellan Zookeeper (distribuerad konfig / key-value store) och sj√§lva Kafka.
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 07:21 31s

Ja, det √§r en av grejerna jag tycker √§r v√§ldigt konstig och diffus. Rent funktionellt tycker jag ocks√• det √§r flera oklarheter kring implementation och designval vilket jag ifr√•gas√§tter, mestadels f√∂r att jag inte vet hur man ska tackla det. Tex kan man inte ha fler workers √§n partitioner f√∂r samma k√∂. Dvs n√§r man skapar k√∂erna (topics) m√•ste man veta hur man kommer vilja skala dem i framtiden vad g√§ller parallell hantering. Enligt dokumentationen √§r det ett designval som ligger till grund f√∂r m√•nga av de garantier som Kafka ger men jag f√•r det inte att landa i mitt huvud. 
Sen har jag flera problem lokalt n√§r jag testar, tex s√• tar det alltid mellan 20-30 sekunder fr√•n att jag startar en consumer till att den faktiskt f√•r meddelanden fr√•n Kafka pga att Kafka g√•r in i en rebalance varje g√•ng jag ansluter. Den ombalanseringen tar av n√•n anledning 20-30 sekunder trots att jag k√∂r lokalt med helt tomt state
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-17 07:23 36s

intressant.. och man beh√∂ver radera och √•terskapa k√∂n f√∂r att √§ndra p√• partitioneringen?
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 07:25 13s

Oklart. Tror det kan balanseras om men att det m√•ste g√∂ras via konfigurationer, dvs du kan inte bara skala upp workers och s√• ‚Äùfunkar det‚Äù. F√∂r varje worker m√•ste du d√• konfa en till plats i Kafka. Alternativt att man konfar fler partitioner √§n vad man tror beh√∂vs f√∂r ett tag. Inga problem att ha fler
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-17 07:25 42s

ahh
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 07:26 15s

L√•ter orimligt i mina √∂gon men jag k√§nner spontant att Kafka √§r v√§ldigt mycket sv√•rare att f√• grepp om √§n tex Rabbitmq, l√§ngre startstr√§cka och mer som man m√•ste f√∂rst√• f√∂r att kunna k√∂ra bra. 
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-17 07:27 06s

bara 20s-delayen l√•ter ju som att den skulle bli extremt frustrerande att utveckla f√∂r
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 07:27 08s

Dessa problem √§r endast relaterade till queue-worker modellen, inte pubsub. 
Ja det √§r v√§ldigt irriterande. Speciellt n√§r man sitter med JS d√§r det bara √§r att tuta och k√∂ra. Men t√§nker att det m√•ste va n√•t knas n√•nstans, n√•t som jag missat. Sen n√§r allt v√§l har kommit ig√•ng s√• g√•r det smidigt d√§refter men iom att man ofta beh√∂ver starta om n√§r man testar och itererar fram blir det v√§ldigt kn√∂ligt
Men jag k√∂r helt p√• default out of the box och f√∂ljer deras egna tutorial  
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-17 07:29 16s

üòï
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-17 16:25 50s

I azure event hub (som man kan se som ett alternativ till kafka) √§r rekommendation att en consumer group max har en l√§sare per partition. Lite grovt kan man se en consumer group som en applikation, men mer specifik handlar det om en vy av event hubben och state som beskriver hur l√•ngt man har kommit l√§sningen. Jag antar rekommendationen beror p√• att synkronisering av statet annars skulle vara jobbigt och att man d√• riskerar att behandla ett event flera g√•nger av misstag.

Dock √§r det okej att olika consumer groups har l√§sare som l√§ser fr√•n samma partition samtidigt d√• de h√•ller reda p√• sitt state separat.
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 16:55 35s

Men √§r tanken d√• att man ska skala upp genom att starta flera consumer groups? D√• kommer man ju processa samma meddelande flera g√•nger?
Eller finns det kanske inga praktiska fall d√• man faktisk beh√∂ver elastisk skalning av worker pooler?
I tex ditt fall Jocke vet ni att ni vill processa ungef√§r 4000 meddelanden per sekund. D√• vet ni hur ni ska skala fr√•n b√∂rjan. Men s√§g att du bygger en tj√§nst som kommer v√§xa mer organiskt, hur ska man t√§nka d√•?
T√§nk photo garden tex. Ett tu tre s√• hamnar vi p√• reddits f√∂rstasida och anv√§ndarbasen b√∂rjar v√§xa enormt. D√• vill vi enkelt kunna skruva upp antal workers tex
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-17 17:02 58s

Man n√•r h√∂g prestanda genom att man har ett h√∂gt antal partitioner och man kan d√• ha upp till samma antal l√§s-instanser (och alla l√§s-instanser har samma consumer group). En l√§s-instans kan l√§sa fr√•n flera olika partitioner. 

Dock l√∂ser det inte problemet som uppst√•r om belastningen √∂kar extremt mycket p√• kort tid. I ett s√•nt fall tror jag IoT hub √§r mer l√§mpligt, men i praktiken kommer andra delar av l√∂sningen antagligen st√∂ta p√• prestandaproblem med s√• stor belastnings√∂kning som du n√§mner. Vet inte helt hur IoT hub fungerar d√• jag inte anv√§nt det. Lite f√∂renklat kan man se IoT hub som en f√∂rb√§ttring av event hub med fler features och b√§ttre uppskalning. Nackdelen med IoT hub √§r att det kostar mer.
IoT hub har tex. st√∂d f√∂r tv√•v√§gs-kommunikation och hantering av enskilda enheter.

<!--excerpt-->
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 17:10 52s

Ja en l√∂sning √§r ju att s√§tta ett godtyckligt antal partitioner fr√•n b√∂rjan men det k√§nns v√§ldigt l√∂st f√∂rankrat d√• det helt enkelt inte kan baseras p√• n√•t. 
Ska kolla in iot hub. I √∂vrigt h√•ller jag p√• att testa [https://nats.io](https://nats.io) 

<div class="attachment"><h4>NATS - Open Source Messaging System | Secure, Native Cloud Application Development</h4><div class="text">NATS is a high performance messaging system that acts as a distributed messaging queue for cloud native applications, IoT device messaging, and microservices architecture.</div>
<a href="https://nats.io">NATS - Open Source Messaging System | Secure, Native Cloud Application Development</a></div>
    
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-17 17:18 40s

Och specifikt NATS streaming server som √§r Kafka-motsvarigheten
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-20 10:18 19s

Dagens VSCode-extension: [https://marketplace.visualstudio.com/items?itemName=humao.rest-client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client)

Postman √§r nu d√∂tt.

<div class="attachment"><h4>REST Client - Visual Studio Marketplace</h4><div class="text">Extension for Visual Studio Code - REST Client for Visual Studio Code</div>
<a href="https://marketplace.visualstudio.com/items?itemName=humao.rest-client"><div class="linkdiv"><img src="/assets/blogAssets/REST Client - Visual Studio Marketplace" fallback="REST Client - Visual Studio Marketplace"/></div></a></div>
    
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-20 10:20 21s

Kl√•r det verkligen postmans olika features? Tex. st√∂d f√∂r milj√∂er s√• man kan ange variabler som ers√§tts med milj√∂-specifika variabler, delning av collections med kollegor och annat.
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-20 10:20 51s

jag har inte testat det helt - f√∂r mitt allm√§na use-case sl√•r det dock postman helt och h√•llet
d√§r jag oftast anv√§nder postman som en lite mer kraftfull curl
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-20 10:21 26s

Aha okej
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-20 10:21 28s

och att slippa starta ytterligare en electron-app √§r v√§rt helt och h√•llet f√∂r mig
tyckte jag s√•g n√•got med variabler dock!
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-20 13:48 34s

Ska vi st√§lla upp i VM i excel? [http://moschampionship.com/](http://moschampionship.com/)
Kanske PowerPoint √§r r√§tt gren f√∂r oss?
</section>
<section class="message" markdown="1">
### johanhazelius - 2018-04-20 14:54 28s

Haha, jag tycker sj√§lv jag √§r ganska duktig p√• Excel s√• varf√∂r inte:)
</section>
<section class="message" markdown="1">
### jens.hunt - 2018-04-20 17:30 48s

@oscarnylander snart beh√∂ver vi aldrig l√§mna code
</section>