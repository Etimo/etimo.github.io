---
layout: post
title: Teknik-chatt 2018-04-23 - 2018-04-30
excerpt_separator: <!--excerpt-->
---
<section class="message" markdown="1">
### oscarnylander - 2018-04-23 09:29 22s

@Unkown I for one welcome my new Microsoft overlords 游냖
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-23 20:11 21s

Riktigt intressant f칬r min del @daniel.winther, finns typ en bransch-standard inom PSD2 ([https://www.berlin-group.org/psd2-access-to-bank-accounts](https://www.berlin-group.org/psd2-access-to-bank-accounts)). F친r gr칛va igenom hur n칛ra dessa Tink ligger.
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 06:58 04s

Beh칬ver g칬ra mig av med ett g칛ng gamla h친rddiskar. Vill g칛rna utpl친na informationen p친 dem innan det 칛r dags f칬r tippen, om n친gon har en favorit-utility f칬r s친dant s친 mottages tips g칛rna.
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:22 00s

DBAN 칛r v칛l en klassiker
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:51 33s

[https://www.palletsprojects.com/blog/flask-1-0-released/](https://www.palletsprojects.com/blog/flask-1-0-released/)

Flask har kommit ut med en 1.0-release! Intressant.

<div class="attachment"><h4>Flask 1.0 Released</h4><div class="text"></div>
<a href="https://www.palletsprojects.com/blog/flask-1-0-released/"><img src="https://www.palletsprojects.com/og_image.png" fallback="Flask 1.0 Released"/></a></div>
    
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-27 09:54 53s

woop woop! p친 tiden 游땏
har ju funnits hur l칛nge som helst
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:56 01s

eller hur, m칛rkv칛rdigt att de inte g친tt till 1.0 칛nnu
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:50 44s

Haha, Flask fanns till och med n칛r jag skrev ordentligt med Python senast. Tur att jag v칛ntade i ca 10 친r s친 att jag inte l칛rt mig omogen teknik! ;)
츿ven om jag mer tror att det h칛r 칛r ett fall av att hantera versioner som Linus.
[https://betanews.com/2018/04/16/linux-kernel-5-0/](https://betanews.com/2018/04/16/linux-kernel-5-0/)

<div class="attachment"><h4>Linus Torvalds says Linux kernel v5.0 'should be meaningless'</h4><div class="text">Following the release of Linux kernel 4.16, Linus Torvalds has said that the next kernel will be version 5.0. Or maybe it won't, because version numbers are meaningless.</div>
<a href="https://betanews.com/2018/04/16/linux-kernel-5-0/"><div class="linkdiv"><img src="/assets/blogAssets/Linus Torvalds says Linux kernel v5.0 'should be meaningless'" fallback="Linus Torvalds says Linux kernel v5.0 'should be meaningless'"/></div></a></div>
    
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 11:55 44s

Troligen 칛r det s친 游뗵
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:56 07s

DBAN verkar vara precis r칛tt verktyg @daniel.winther
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 11:56 27s

*@oscarnylander 游
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 11:58 09s

@erik.malm @oscarnylander anv칛nd inte DBAN f칬r SSD:er
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:58 19s

F칬rr i v칛rlden har jag l친tit bash skriva fr친n /dev/random 칬ver hela disken ett par v칛ndor men har inte energi f칬r det den h칛r g친ngen.
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 11:58 46s

dom har mycket intern skrivbalansering osv vilket inneb칛r att rester kommer finnas kvar
anv칛nd [https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase](https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase) ist칛llet
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:59 54s

Mmm.. Den niv친 p친 teknik jag g칬r mig av med 칛r 5200rpms diskar s친 inte ett problem den h칛r v칛ndan. Men l칛r vara relevant n칛sta g친ng jag k칬r en utrensning.

<!--excerpt-->
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:00 04s

ahh okej
ja d친 borde det r칛cka
eller bara `dd if=/dev/urandom of=/dev/sdXN bs=1M` ett par ggr
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 12:01 20s

`dd: disk destroyer` :parrot:
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:01 26s

Det 칛r min vanliga. Men det 칛r fem diskar som kommer beh칬va behandlas och d친 sl친r latmasken till
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:01 32s

ahh, iC
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 12:01 43s

koppla in alla och k칬r parallellt!
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:02 50s

Om de bara vore thunderbolt s친 kunde jag daisy-chaina allt!
Som en h친rddisk konga-line!
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:05 24s

[https://www.youtube.com/watch?v=deJ9lpNBZUA](https://www.youtube.com/watch?v=deJ9lpNBZUA)

<div class="attachment"><h4>That Mitchell and Webb Look - Posh Dancing</h4><div class="text"></div>
<a href="https://www.youtube.com/watch?v=deJ9lpNBZUA"><div class="linkdiv"><img src="/assets/blogAssets/That Mitchell and Webb Look - Posh Dancing" fallback="That Mitchell and Webb Look - Posh Dancing"/></div></a></div>
    
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:09 35s

Jag 칛r n칬jd med hur den h칛r diskussionen slutade.
P.S. are we the baddies?
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:10 58s

tror inte vi har d칬dskallehattar 칛n?
Johan f친r ta tag i det 游땥
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-28 17:47 28s

F칬r ett tag sedan sa jag att jag skulle informera om resultatet av prestandatest-applikationen jag skrev som skulle m칛ta prestandan i azure event hub (vilket kan ses som ett kafka-alternativ). Applikationen jag skrev best친r av tv친 delar: En del som skriver en massa events (med samma storlek som vi skickar i produktion) till event hub och en del som l칛ser dessa events fr친n event hub. Skriv-delen 칛r ett azure webjob och l칛s-delen 칛r en azure function. B친da dessa delar kan skalas upp och ut som man vill. 츿ven sj칛lva event hub'en kan skalas genom att h칬ja antalet throughput units (TPU) och antalet partitioner (i praktiken m친ste man radera och skapa en ny event hub d친 man inte kan 칛ndra antalet partitioner i efterhand).

B친de skriv- och l칛s-delen hanterar intervall. Man kan d친 ange att varje instans ska skicka tex. 100 meddelanden per sekund under tex. 1 minut och d칛refter h칬ja till 500 och d칛refter till 1000 meddelanden per sekund. 

L칛s-delen ber칛knar lite enkla m칛tdata f칬r att ta reda p친 prestandan. M칛tdatan lagras inte i databasen f칬r varje event d친 det skulle p친verka resultatet mycket. Ist칛llet lagras bara m칛tdatan en g친ng per intervall, dvs. tex. en g친ng per minut.

Resultatet visade att throughput blir h칬gt om man skalar upp/ut men att latensen f칬r en del av eventen 칛r f칬rv친nansv칛rt h칬gt trots att man skalat upp/ut (친tminstone blev jag f칬rv친nad). De flesta events g친r igenom event hub'en snabbt men en liten andel tar 칬ver en sekund och ibland 칬ver 5 sekunder.

Microsoft har sj칛lva gjort ett liknande test fast f칬r ett l칛ngre fl칬de och fler events per sekund. 츿ven d칛r ser man att en andel av eventen passerar genom fl칬det mycket l친ngsammare 칛n genomsnittet. H칛lften av eventen passerar fl칬det p친 mindre 칛n 1,1 sek medan en del tar mycket l칛ngre tid: [https://blogs.msdn.microsoft.com/appserviceteam/2017/09/19/processing-100000-events-per-second-on-azure-functions/](https://blogs.msdn.microsoft.com/appserviceteam/2017/09/19/processing-100000-events-per-second-on-azure-functions/)

Jag vill dock inte p친st친 att mina m칛tresultat 칛r 100% tillf칬rlitliga. Det kan vara s친 att n친got i applikationen jag skrev 칛r suboptimalt. Dessutom kan klockan skilja sig mellan olika maskiner i azure vilket skulle ge stor effekt p친 m칛tresultaten. Jag h칬rde n친gon ber칛tta att det 칛r vanligt att klockan i azure-maskiner 칛r "korrekt tid +/- 2 sekunder" vilket inneb칛r ett intervall p친 4 sekunder. Ett f칬rslag p친 workaround 칛r att f칬rlita sig p친 databas-serverns klocka f칬r att kompensera f칬r detta. Vid uppstart skulle applikationen (b친de skriv- och l칛s-sidan) kunna h칛mta tiden fr친n db-servern f칬r att ta reda p친 hur den lokala klockan skiljer sig fr친n "sanningen" om vi definerar db-serverns klocka som "sanningen" i prestandatestet. Applikationen f친r d친 ta h칛nsyn till differensen d칛remellan. D칛rmed kompenserar man f칬r skillnad i klocka p친 olika maskiner. D친 jag bytt team har jag inte implementerat denna workaround men jag har tipsat teamet om detta.
</section>