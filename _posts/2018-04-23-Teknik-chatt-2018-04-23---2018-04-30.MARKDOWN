---
layout: post
title: Teknik-chatt 2018-04-23 - 2018-04-30
excerpt_separator: <!--excerpt-->
---
<section class="message" markdown="1">
### oscarnylander - 2018-04-23 09:29 22s

@jens.hunt I for one welcome my new Microsoft overlords ?
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-23 20:11 21s

Riktigt intressant f?r min del @daniel.winther, finns typ en bransch-standard inom PSD2 ([https://www.berlin-group.org/psd2-access-to-bank-accounts](https://www.berlin-group.org/psd2-access-to-bank-accounts)). F?r gr?va igenom hur n?ra dessa Tink ligger.
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 06:58 04s

Beh?ver g?ra mig av med ett g?ng gamla h?rddiskar. Vill g?rna utpl?na informationen p? dem innan det ?r dags f?r tippen, om n?gon har en favorit-utility f?r s?dant s? mottages tips g?rna.
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:22 00s

DBAN ?r v?l en klassiker
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:51 33s

[https://www.palletsprojects.com/blog/flask-1-0-released/](https://www.palletsprojects.com/blog/flask-1-0-released/)

Flask har kommit ut med en 1.0-release! Intressant.

<div class="attachment"><h4>Flask 1.0 Released</h4><div class="text"></div>
<a href="https://www.palletsprojects.com/blog/flask-1-0-released/"><img src="https://www.palletsprojects.com/og_image.png" fallback="Flask 1.0 Released"/></a></div>
    
</section>
<section class="message" markdown="1">
### daniel.winther - 2018-04-27 09:54 53s

woop woop! p? tiden ?
har ju funnits hur l?nge som helst
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 09:56 01s

eller hur, m?rkv?rdigt att de inte g?tt till 1.0 ?nnu
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:50 44s

Haha, Flask fanns till och med n?r jag skrev ordentligt med Python senast. Tur att jag v?ntade i ca 10 ?r s? att jag inte l?rt mig omogen teknik! ;)
?ven om jag mer tror att det h?r ?r ett fall av att hantera versioner som Linus.
[https://betanews.com/2018/04/16/linux-kernel-5-0/](https://betanews.com/2018/04/16/linux-kernel-5-0/)

<div class="attachment"><h4>Linus Torvalds says Linux kernel v5.0 'should be meaningless'</h4><div class="text">Following the release of Linux kernel 4.16, Linus Torvalds has said that the next kernel will be version 5.0. Or maybe it won't, because version numbers are meaningless.</div>
<a href="https://betanews.com/2018/04/16/linux-kernel-5-0/"><div class="linkdiv"><img src="/assets/blogAssets/Linus Torvalds says Linux kernel v5.0 'should be meaningless'" fallback="Linus Torvalds says Linux kernel v5.0 'should be meaningless'"/></div></a></div>
    
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 11:55 44s

Troligen ?r det s? ?
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:56 07s

DBAN verkar vara precis r?tt verktyg @daniel.winther
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 11:56 27s

*@oscarnylander ?
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 11:58 09s

@erik.malm @oscarnylander anv?nd inte DBAN f?r SSD:er
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:58 19s

F?rr i v?rlden har jag l?tit bash skriva fr?n /dev/random ?ver hela disken ett par v?ndor men har inte energi f?r det den h?r g?ngen.
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 11:58 46s

dom har mycket intern skrivbalansering osv vilket inneb?r att rester kommer finnas kvar
anv?nd [https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase](https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase) ist?llet
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 11:59 54s

Mmm.. Den niv? p? teknik jag g?r mig av med ?r 5200rpms diskar s? inte ett problem den h?r v?ndan. Men l?r vara relevant n?sta g?ng jag k?r en utrensning.

<!--excerpt-->
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:00 04s

ahh okej
ja d? borde det r?cka
eller bara `dd if=/dev/urandom of=/dev/sdXN bs=1M` ett par ggr
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 12:01 20s

`dd: disk destroyer` :parrot:
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:01 26s

Det ?r min vanliga. Men det ?r fem diskar som kommer beh?va behandlas och d? sl?r latmasken till
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:01 32s

ahh, iC
</section>
<section class="message" markdown="1">
### oscarnylander - 2018-04-27 12:01 43s

koppla in alla och k?r parallellt!
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:02 50s

Om de bara vore thunderbolt s? kunde jag daisy-chaina allt!
Som en h?rddisk konga-line!
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:05 24s

[https://www.youtube.com/watch?v=deJ9lpNBZUA](https://www.youtube.com/watch?v=deJ9lpNBZUA)

<div class="attachment"><h4>That Mitchell and Webb Look - Posh Dancing</h4><div class="text"></div>
<a href="https://www.youtube.com/watch?v=deJ9lpNBZUA"><div class="linkdiv"><img src="/assets/blogAssets/That Mitchell and Webb Look - Posh Dancing" fallback="That Mitchell and Webb Look - Posh Dancing"/></div></a></div>
    
</section>
<section class="message" markdown="1">
### erik.malm - 2018-04-27 12:09 35s

Jag ?r n?jd med hur den h?r diskussionen slutade.
P.S. are we the baddies?
</section>
<section class="message" markdown="1">
### teo.roijezon - 2018-04-27 12:10 58s

tror inte vi har d?dskallehattar ?n?
Johan f?r ta tag i det ?
</section>
<section class="message" markdown="1">
### joakoles - 2018-04-28 17:47 28s

F?r ett tag sedan sa jag att jag skulle informera om resultatet av prestandatest-applikationen jag skrev som skulle m?ta prestandan i azure event hub (vilket kan ses som ett kafka-alternativ). Applikationen jag skrev best?r av tv? delar: En del som skriver en massa events (med samma storlek som vi skickar i produktion) till event hub och en del som l?ser dessa events fr?n event hub. Skriv-delen ?r ett azure webjob och l?s-delen ?r en azure function. B?da dessa delar kan skalas upp och ut som man vill. ?ven sj?lva event hub'en kan skalas genom att h?ja antalet throughput units (TPU) och antalet partitioner (i praktiken m?ste man radera och skapa en ny event hub d? man inte kan ?ndra antalet partitioner i efterhand).

B?de skriv- och l?s-delen hanterar intervall. Man kan d? ange att varje instans ska skicka tex. 100 meddelanden per sekund under tex. 1 minut och d?refter h?ja till 500 och d?refter till 1000 meddelanden per sekund. 

L?s-delen ber?knar lite enkla m?tdata f?r att ta reda p? prestandan. M?tdatan lagras inte i databasen f?r varje event d? det skulle p?verka resultatet mycket. Ist?llet lagras bara m?tdatan en g?ng per intervall, dvs. tex. en g?ng per minut.

Resultatet visade att throughput blir h?gt om man skalar upp/ut men att latensen f?r en del av eventen ?r f?rv?nansv?rt h?gt trots att man skalat upp/ut (?tminstone blev jag f?rv?nad). De flesta events g?r igenom event hub'en snabbt men en liten andel tar ?ver en sekund och ibland ?ver 5 sekunder.

Microsoft har sj?lva gjort ett liknande test fast f?r ett l?ngre fl?de och fler events per sekund. ?ven d?r ser man att en andel av eventen passerar genom fl?det mycket l?ngsammare ?n genomsnittet. H?lften av eventen passerar fl?det p? mindre ?n 1,1 sek medan en del tar mycket l?ngre tid: [https://blogs.msdn.microsoft.com/appserviceteam/2017/09/19/processing-100000-events-per-second-on-azure-functions/](https://blogs.msdn.microsoft.com/appserviceteam/2017/09/19/processing-100000-events-per-second-on-azure-functions/)

Jag vill dock inte p?st? att mina m?tresultat ?r 100% tillf?rlitliga. Det kan vara s? att n?got i applikationen jag skrev ?r suboptimalt. Dessutom kan klockan skilja sig mellan olika maskiner i azure vilket skulle ge stor effekt p? m?tresultaten. Jag h?rde n?gon ber?tta att det ?r vanligt att klockan i azure-maskiner ?r "korrekt tid +/- 2 sekunder" vilket inneb?r ett intervall p? 4 sekunder. Ett f?rslag p? workaround ?r att f?rlita sig p? databas-serverns klocka f?r att kompensera f?r detta. Vid uppstart skulle applikationen (b?de skriv- och l?s-sidan) kunna h?mta tiden fr?n db-servern f?r att ta reda p? hur den lokala klockan skiljer sig fr?n "sanningen" om vi definerar db-serverns klocka som "sanningen" i prestandatestet. Applikationen f?r d? ta h?nsyn till differensen d?remellan. D?rmed kompenserar man f?r skillnad i klocka p? olika maskiner. D? jag bytt team har jag inte implementerat denna workaround men jag har tipsat teamet om detta.
</section>